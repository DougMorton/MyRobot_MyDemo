<!DOCTYPE html>
<html>
<head>
	<title>Advertiser Page</title>
    <link href="style/style.css" rel="stylesheet">
    <link href="style/jquery-ui-1.11.2.css" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="https://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>	
	<script src="//cdn.webrtc-experiment.com/RTCMultiConnection.js"> </script>
	<script src="//cdn.webrtc-experiment.com/firebase.js"> </script>
	<script src="//cdn.webrtc-experiment.com/RecordRTC.js"></script>
	<script src="//cdn.webrtc-experiment.com/getMediaElement.js"></script>
</head>
<body>
<form>
<table border=0 width="98%" style="min-height:98%;">
	<tr>
		<td colspan=10 width="100%">
			<table width="100%" border=0>
				<tr>
					<td width="70%" align="left">
						<table border=0 align="left">
							<tr>
								<td>
									<img src="images/livingads.png">
								</td>
								<td style="vertical-align:middle;">
									<img src="images/mr-channel-menu.png" style="vertical-align:middle;" width="60px" height="40px"> &nbsp; &nbsp;
								</td>
								<td style="vertical-align:middle;">
									<input type="text" placeholder="Find" style="height:25px;font-size:10pt;"> &nbsp;
									<input type="text" placeholder="Novato, CA" style="height:25px;font-size:10pt;">	 &nbsp;					
									<img src="images/ios-search.png" style="vertical-align:middle;" width="30px" height="30px">
								</td>
							</tr>
						</table>
					</td>
					<td align="right" style="vertical-align:middle;">
						<table border=0 style="vertical-align:middle;">
							<tr>
								<td style="vertical-align:middle;">
									Hi, <div style="display:inline" id="your-name"></div> (<div style="display:inline" id="room-name"></div>) &nbsp;
									<img src="images/myrobot-face.png" style="vertical-align:middle;" width="50px" height="30px"> &nbsp;
									<img src="images/help.png" width="25" height="25" style="vertical-align:middle;" width="30px" height="30px">&nbsp;Help
						   			<div id="messages" class="messages" style="border:0px solid black;position:fixed;float:top;top:10px;right:20px;"></div>
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr>
		<td width="60%">
			<table border=0 cellpadding=0 cellspacing=0 style="background-color:silver;">
				<tr>
					<td>
						<div id="holder" style="height:400px;width:600px;border:0px black solid;">
							<img id="imgPlaceholder" src="images/kitten-1.jpg" style="display:inline;height:400px;width:600px;z-index:99;">
							<div id="divVideo" height="400px" width="600px"></div>
						</div>
					</td>
				</tr>
				<tr>
					<td style="padding:0px;background-color:silver;text-align:center;">
						<div style="position:relative;top:0px;left:30px;">
							<div style="position:absolute;top:-10px;left:20px;">
								<img src="images/scrollbar_arrow_up.gif" style="vertical-align:middle;" width="30px" height="30px">
							</div>
							<div style="position:absolute;top:3px;left:0px;">
								<img src="images/scrollbar_arrow_left.gif" style="vertical-align:middle;" width="30px" height="30px">
							</div>
							<div style="position:absolute;top:3px;left:40px;">
								<img src="images/scrollbar_arrow_right.gif" style="vertical-align:middle;" width="30px" height="30px">
							</div>
							<div style="position:absolute;top:16px;left:20px;">
								<img src="images/scrollbar_arrow_down.gif" style="vertical-align:middle;" width="30px" height="30px">
							</div>
						</div>
						<table cellpadding=0 cellspacing=0 style="min-height:30px;margin-top:5px;" border=0>
							<tr>
								<td>
								</td>
								<td>
									<img src="images/mr-minus.png" style="vertical-align:middle;" width="30px" height="30px"> 
									<img src="images/mr-plus.png" style="vertical-align:middle;" width="30px" height="30px"> 
									<img src="images/mr-reset-ptz.png" style="vertical-align:middle;" width="30px" height="30px">
								</td>
								<td style="min-width:100px;">
								</td>
								<td>
									<img src="images/mr-hang-up.png" width="30px" height="30px" onclick="jsToggleOpacity(this)"> &nbsp;
									<img src="images/ios-mic.png" width="30px" height="30px" onclick="jsToggleOpacity(this)"> &nbsp;
									<img src="images/ios-videocam.png" width="30px" height="30px" onclick="jsToggleOpacity(this)">
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</td>
		<td>
			<table cellpadding=0 cellspacing=0 style="border:2px gray solid;min-height:420px;min-width:350px;text-align:center;">
				<tr>
					<td style="background-color:lightgrey;min-height:50px;vertical-align:middle;font-size:12pt;">
						<b>System Notifications</b>
					</td>
				</tr>
				<tr>
					<td style="height:83%;vertical-align:middle;" align="center">
						<div id="divChannelOffline" style="display:inline;background-color:yellow;font-weight:bold;border:2px solid gray;margin:auto;width:125px;font-size:12pt;">Channel is off-line</div>
						<div id="divChatWindow" style="display:none;text-align:center;margin:auto;">
							<table style="width:95%" align="center">
								<tr>
									<td style="border:0px silver solid;width:100%;text-align:center;">
										<div class="main-input-box" align="left" style="width:100%;">
											<textarea style="width:98%;font-size:10pt;align:center;" placeholder="Type your question here.." ></textarea>
										</div>
										<div id="who-is-typing" class="who-is-typing"></div>
										<div id="textMessages" style="width:98%;font-size:10pt;min-height:280px;" class="textMessages"></div>
									</td>
								</tr>
							</table>
						</div>
						<div id="divFileShare" style="display:none;border:0px solid black;margin:0;padding:0;">
							Browse to select file: <br>
							<input type="upload" style="margin:0;padding:0;"><br>
							<input type="button" value="Click to Upload" style="margin:0;padding:0;">
						</div>
						<div id="divScreenShare" style="display:none;border:0px solid black;margin:0;padding:0;">
							Your screen would now be shared..<br>
						</div>
					</td>
				</tr>
				<tr>
					<td style="background-color:lightgrey;min-height:50px;vertical-align:middle;text-align:center;">
						<div id="divGoLive" style="background-color:red;border:2px solid black;width:110px;color:white;margin:auto;font-size:12pt;" onclick="jsToggleGoLive()">Go Live!</div>
					</td>
				</tr>
			</table>
		</td>
		<td style="width:120px;padding-top:20px;">
			<div id="divRedButton" style="display:none;vertical-align:middle;height:50px;width:50px;white-space:nowrap;">
				<img id="btnRed" src="images/redbutton.gif" style="vertical-align:middle;height:50px;width:50px;">Call Active
			</div>
			<br>
			<div id="divVideoBtn" style="position:relative;white-space:nowrap;">
				<img src="images/webcam.png" style="vertical-align:middle;" onclick="jsToggleVideo()"> <span onclick="jsToggleVideo()">Video</span>
				<img id="webcam-no" class="red-no" onclick="jsToggleVideo()" src="images/red_no.png" width="50px" height="50px" style="position:absolute;top:0px;left:0px;opacity:.5;display:none;z-index:99;">
			</div>
			<br>
			<div id="divAudioBtn" style="position:relative;white-space:nowrap;">
				<img src="images/microphone.png" style="vertical-align:middle;" onclick="jsToggleAudio()"> <span onclick="jsToggleAudio()">Audio</span>
				<img id="audio-no" class="red-no" onclick="jsToggleAudio()" src="images/red_no.png" width="50px" height="50px" style="position:absolute;top:0px;left:0px;opacity:.5;display:none;">
			</div>
			<br>
			<img src="images/chat-message.png" style="vertical-align:middle;" onclick="jsToggleChat()"> <span style="white-space:nowrap;" onclick="jsToggleChat()">Chat</span>
			<br><br>
			<img src="images/share-files.png" style="vertical-align:middle;" onclick="jsToggleFileShare()"> <span style="white-space:nowrap;" onclick="jsToggleFileShare()">Share File</span>
			<br><br>
			<img src="images/screen.png" style="vertical-align:middle;" onclick="jsToggleScreenShare()"> <span style="white-space:nowrap;" onclick="jsToggleScreenShare()">Share Screen</span>
			<br><br>
			<img onclick="jsOpenSettings()" src="images/settings.png" style="vertical-align:middle;" id="settings"> <span style="white-space:nowrap;" onclick="jsOpenSettings()">Settings</span>
		</td>
	</tr>
	<tr>
		<td>
			<table align="left" style="padding-left:30px;" width="100%">
				<tr>
					<td style="vertical-align:middle;padding-top:10px;">
						<div style="font-size:13pt;font-weight:bold;">Kitties Are Cute</div>
						<br>
						<img src="images/kitten-1.jpg" width=80 height=70 style="vertical-align:middle;"> &nbsp;
						<b>Kitties</b> &nbsp;
						<img src="images/info.png" style="vertical-align:middle;" width="30px" height="30px"> &nbsp;
						<img src="images/android-star-outline.png" style="vertical-align:middle;" width="30px" height="30px"> &nbsp;
						<img src="images/android-share-alt.png" style="vertical-align:middle;" width="30px" height="30px">		
					</td>
				</tr>
				<tr>
					<td style="padding:20px;">
						This site attempts to settle the controversy of whether or not kitties are cute.  Many lives have been lost in this conflict and families torn asunder.  We hope to bring peace and understanding to a troubled world by asserting that kitties are indeed cute.
					</td>
				</tr>
				<tr>
					<td>
						<hr width="80%">
					</td>
				</tr>
				<tr>
					<td align="center">
						<br>
						<div style="font-size:8pt;"><i>
							Secure Instant Messaging, Document Sharing & Video Chat<br>
							Brought to you by MyRobot, Inc.
						</div>
					</td>
				</tr>
			</table>	
		</td>
		<td>
			<div style="background-color:lightgrey;border:2px black solid;height:200px;width:350px;margin:auto;">
			</div>
		</td>
	</tr>
</table>

        <div id="settings-panel" class="settings-panel">
            <input type="checkbox" id="autoTranslateText">
            <label for="autoTranslateText" title="Click to chat with users from different locales! All incoming text messages will be auto converted in your language!">Auto translate text into</label>
            <select id="language" title="Select Language in which all incoming messages will be auto converted!">
                <option value="en">English</option>
                <option value="ar">Arabic (العربية)</option>
                <option value="zh-CN">Chinese (Simplified Han) [中文简体]</option>
                <option value="zh-TW">Chinese (Traditional Han) [中國傳統]</option>
                <option value="ru">Russian (Русский)</option>
                <option value="de">Dutch</option>
                <option value="fr">French (Français)</option>
                <option value="hi">Hindi (हिंदी)</option>
                <option value="pt">Portuguese (Português)</option>
                <option value="es">Spanish (Español)</option>
                <option value="tr">Turkish (Türk)</option>
                <option value="nl">Nederlands</option>
                <option value="it">Italiano</option>
                <option value="pl">Polish (Polski)</option>
                <option value="ro">Roman (Român)</option>
                <option value="sv">Swedish (Svensk)</option>
                <option value="vi">Vietnam (Việt)</option>
                <option value="th">Thai(ภาษาไทย)</option>
                <option value="ja">Japanese (日本人)</option>
                <option value="ko">Korean (한국의)</option>
                <option value="el">Greek (ελληνικά)</option>
                <option value="ts">Tamil (தமிழ்)</option>
                <option value="hy">Armenian (հայերեն)</option>
                <option value="bs">Bosnian (Bosanski)</option>
                <option value="ca">Catalan (Català)</option>
                <option value="hr">Croatian (Hrvatski)</option>
                <option value="dq">Danish (Dansk)</option>
                <option value="eo">Esperanto</option>
                <option value="fi">Finnish (Suomalainen)</option>
                <option value="ht">Haitian Creole (Haitian kreyòl)</option>
                <option value="hu">Hungarian (Magyar)</option>
                <option value="is">Icelandic</option>
                <option value="id">Indonesian</option>
                <option value="la">Latin (Latinum)</option>
                <option value="lv">Latvija (Latvijas or lætviə)</option>
                <option value="mk">Macedonian (Македонски)</option>
                <option value="no">Norwegian (norsk)</option>
                <option value="sr">Serbian (српски)</option>
                <option value="sk">Slovak (Slovenský)</option>
                <option value="ws">Swahili (Kiswahili)</option>
                <option value="cy">Welsh (Cymraeg)</option>
            </select>
                        
            <button id="save-settings" style="float: right;">Save Settings</button>
            <table>
                <tr>
                    <td>
                        <h2>Set Bandwidth</h2><br />
                        <label for="audio-bandwidth" class="adjust-width">Audio bandwidth</label>
                        <input type="text" id="audio-bandwidth" value="50" title="kbits/sec"><small>kbps</small>
                        <br />
                        <label for="video-bandwidth" class="adjust-width">Video bandwidth</label>
                        <input type="text" id="video-bandwidth" value="256" title="kbits/sec"><small>kbps</small>
                    </td>
                    
                    <td>
                        <h2>Set Resolutions</h2><br />
                        <label for="video-width" class="adjust-width">Video Width</label>
                        <input type="text" id="video-width" value="640" title="You can use values like: 1920, 1280, 960, 640, 320, 320">
                        <br />
                        <label for="video-height" class="adjust-width">Video Height</label>
                        <input type="text" id="video-height" value="480" title="You can use values like: 1080, 720, 360, 480, 240, 180">
                    </td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox" id="prefer-sctp" checked>
                        <label for="prefer-sctp" title="Prefer using SCTP data channels. Otherwise, RTP data channels will be used.">Is Prefer SCTP Data Channels?</label><br />
                        
                        <label for="chunk-size" class="adjust-width">Chunk Size</label>
                        <input type="text" id="chunk-size" value="15000" title="Chrome's sending limit is 64000 however Firefox's receiving limit is 16000."> <small>chars</small> <br />
                        <label for="chunk-interval" class="adjust-width">Chunk Interval</label>
                        <input type="text" id="chunk-interval" value="100" title="There must be an interval from 50ms to 500ms to make sure data isn't seamlessly skipped."><small>milliseconds</small><br /><br />
                        
                        <input type="checkbox" id="skip-RTCMultiConnection-Logs">
                        <label for="skip-RTCMultiConnection-Logs" title="You can disable all RTCMultiConnection logs.">skip RTCMultiConnection Logs?</label>
                    </td>
                    
                    <td>
                        <h2>Select Devices</h2><br />
                        <label for="audio-devices">Audio Devices</label>
                        <select id="audio-devices"></select>
                        <br />
                        <label for="video-devices">Video Devices</label>
                        <select id="video-devices"></select>
                    </td>
                </tr>
                
                <tr>
                    <td>
                        <label for="max-participants-allowed">Max Participants Allowed?</label>
                        <input type="text" id="max-participants-allowed" value="256"> <br /><br />
                        
                        <input type="checkbox" id="fake-pee-connection">
                        <label for="fake-pee-connection" title="This feature works only on Chrome; it means that a few peer connection will be creates with no audio/video; and no data channels!">Setup Fake Peer Connection?</label>
                    </td>
                    
                    <td>
                        <h2>Select Candidates</h2><br />
                        <input type="checkbox" id="prefer-stun" checked>
                        <label for="prefer-stun">Allow STUN Candidates?</label><br />
                        
                        <input type="checkbox" id="prefer-turn" checked>
                        <label for="prefer-turn">Allow TURN Candidates?</label><br />
                        
                        <input type="checkbox" id="prefer-host" checked>
                        <label for="prefer-host">Allow Hose Candidates?</label>
                    </td>
                </tr>
                
                <tr>
                    <td>
                        <h2>Set DataChannel Options</h2><br />
                        <label for="dataChannelDict">dataChannelDict</label>
                        <input type="text" id="dataChannelDict" value="{ordered:true}">
                    </td>
                    
                    <td>
                        <h2>Set SDP Constraints</h2><br />
                        <input type="checkbox" id="OfferToReceiveAudio" checked>
                        <label for="OfferToReceiveAudio">OfferToReceiveAudio</label><br />
                        
                        <input type="checkbox" id="OfferToReceiveVideo" checked>
                        <label for="OfferToReceiveVideo">OfferToReceiveVideo</label><br />
                        
                        <input type="checkbox" id="IceRestart">
                        <label for="IceRestart">IceRestart</label>
                    </td>
                </tr>
            </table>
            
        </div>

			<div class="main" style="display:none;">
				<button id="continue" title="Click to join the room.">Connect</button>
				<button id="btnOpenRoom" onclick="btnOpenRoom()" title="Click to join the room.">Connect</button>
				<button id="allow-webcam" class="btns" disabled title="Share Your Webcam"></button>
				<span id="allow-webcam-text" class="allow-webcam-text"></span>
				<span id="isWebcamMuted" class="isWebcamMuted"></span>
				<div style="display:none" id="isAudioMuted"></div>
				<button id="allow-mic" class="btns" disabled title="Share Your mic"></button>
				<button id="allow-screen" class="btns" disabled title="Share Your Screen"></button>
				<button id="share-files" class="btns" disabled title="Share Your Files"></button>
				<div class="new-message" style="overflow: hidden;">
					<div class="user-info" style="height: 100%">
					</div>

					<div class="user-activity">
					</div>
				</div>		
				<div style="border:3px black solid" class="users-list" title="Click to view all shared screens and videos!">
					<div class="numbers-of-users">0</div>
				</div>
				<div id="users-container1" class="users-container1"></div>
				<div id="users-container2" class="users-container2"></div>
				<div id="users-container3" class="users-container3"></div>
				<div id="users-container4" class="users-container4"></div>
			</div>

  </form>      
<script src="scripts/ui.main.js"> </script>
<script src="scripts/ui.peer-connection.js"> </script>
<script src="scripts/ui.share-files.js"> </script>
<script src="scripts/ui.users-list.js"> </script>
<script src="scripts/ui.settings.js"> </script>
<!-= 
 -->
<script>
	var divOffLine = document.getElementById("divChannelOffline");
	var divChat = document.getElementById("divChatWindow");
	var divFile = document.getElementById("divFileShare");
	var divScreen = document.getElementById("divScreenShare");
	var divVideo = document.getElementById("divVideo");
	var divAudio = document.getElementById("divAudio");
	var imgPlaceHolder = document.getElementById("imgPlaceholder");
	
	function jsTest() {
		alert("H");
	}
	function jsToggleChat() {
		if (divChat.style.display == "inline") {
			divChat.style.display="none";
			divFile.style.display="none";
			divScreen.style.display="none";
			divOffLine.style.display="inline";    			
		} else {
			divChat.style.display="inline";
			divFile.style.display="none";
			divScreen.style.display="none";
			divOffLine.style.display="none";    			
		}
	}
	function jsToggleFileShare() {
		if (divFile.style.display == "inline") {
			divOffLine.style.display = "inline";
			divChat.style.display="none";
			divFile.style.display="none";
			divScreen.style.display="none";
		} else {
			divOffLine.style.display = "none";
			divChat.style.display="none";
			divFile.style.display="inline";
			divScreen.style.display="none";
		}
	}
	function jsToggleScreenShare() {
		if (divScreen.style.display == "inline") {
			divOffLine.style.display = "inline";
			divChat.style.display="none";
			divFile.style.display="none";
			divScreen.style.display="none";
		} else {
			divOffLine.style.display = "none";
			divChat.style.display="none";
			divFile.style.display="none";
			divScreen.style.display="inline";
		}
	}
	function jsToggleVideo() {
		var o = document.getElementById("webcam-no");
		//var p = document.getElementById("imgPlaceholder");
		//var v = document.getElementById("divVideo");
		if (o.style.display == "inline") {
			o.style.display="none";
			imgPlaceHolder.style.display="none";
			divVideo.style.display="inline";
		} else {
			o.style.display="inline";
			imgPlaceHolder.style.display="inline";
			divVideo.style.display="none";
		}
	}
	function jsToggleAudio() {
		var o = document.getElementById("audio-no");
		if (o.style.display == "inline") {
			o.style.display="none";
			//v.style.display="none";
		} else {
			o.style.display="inline";
			//v.style.display="inline";
		}
		handleMic();
	}
	function jsToggleGoLive() {
		var o = document.getElementById("divGoLive");
		var b = document.getElementById("divRedButton");
		var c = document.getElementById("divChannelOffline");
		if (o.innerText == "Go Live!") {
			showWebcam();
			o.innerText = "You are Live!";
			b.style.display = "inline";
			c.innerText = "Channel is on-line"
		} else {
			o.innerText = "Go Live!";
			b.style.display = "none";
			c.innerText = "Channel is off-line"
		}
	}
	function jsOpenSettings() {
		$( "#settings-panel" ).dialog({
			autoOpen: false,
			width: 800
		});
		$("#settings-panel").dialog('open');
		settingsPanel.style.display = 'block';
	}
	function getUrlVars() {
	var vars = {};
	var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
	vars[key] = value;
	});
	return vars;
	}

	var yourName = document.querySelector('#your-name');
	var roomName = document.querySelector('#room-name');
	var room = getUrlVars()["r"];
	var user = getUrlVars()["u"];
	//room=decodeURIComponent(room);
	user=decodeURIComponent(user);
	
	if ((typeof room !== "undefined") && (typeof user !== "undefined")) {
		localStorage.setItem('room-name', room);
		localStorage.setItem('your-name', user);
		window.location=window.location.pathname;
	} else {
		roomName.innerText = localStorage.getItem('room-name');
		yourName.innerText = localStorage.getItem('your-name');
		setTimeout(function() {
			document.getElementById('continue').onclick();
			}, 1000);
	}
	function jsToggleOpacity(o) {
		if (o.style.opacity==.3) {
			o.style.opacity=1;
		} else {
			o.style.opacity=.3;
		}
	}
</script>
</body>
</html>
